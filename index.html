<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Willkommen beim Gewinnspiel!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(180deg, #fafafa 0%, #cfcfcf 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
            text-align: center;
        }
        .container {
            max-width: 600px;
            width: 100%;
            padding: 30px;
            background-color: #fafafa;
            border-radius: 10px;
            box-shadow: 0px 0px 20px rgba(0,0,0,0.1);
        }
        #welcomeMessage, #emailForm, #thankyouMessage {
            display: none;
        }
        .legalNotes {
            font-size: 0.7em;
            text-align: justify;
        }
        .lotteryInfo {
            font-size: 0.9em;
            text-align: justify;
        }
        .bold {
            font-size: 1.2em;
        }
        input[type="email"], button[type="submit"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-size: 1em;
        }
        button[type="submit"] {
            background-color: #8fd3f4;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        img {
            width: 300px;
            display: block;
            margin: 0 auto;
        }
        .divider {
            border-top: 1px solid #ccc;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/4e/Universität_Leipzig_logo.svg" alt="Universität Leipzig">
        <div id="welcomeMessage">
            <h1>Willkommen beim Gewinnspiel!</h1>
        </div>
        <form id="emailForm" action="https://formspree.io/f/mdorndzw" method="POST">
            <input type="hidden" id="code" name="code" />
            <input type="hidden" id="num" name="num" />
            <p>Bitte trage hier die Email-Adresse ein, mit der du bei einem möglichen Gewinn kontaktiert werden möchtest.<br><br> Viel Glück!1</p>
            <input type="email" id="email" name="_replyto" required placeholder="Deine E-Mail Adresse" />
            <button type="submit">Teilnehmen</button>
            <p class="legalNotes">
                Die Angabe deiner Email-Adresse dient lediglich zur Benachrichtigung im Falle Deines Gewinns. Darüber hinaus wird keine Kontaktaufnahme stattfinden. Deine Daten werden nicht an Dritte weitergegeben.<br><br> Die Teilnahme am Gewinnspiel ist freiwillig, unverbindlich und kann jederzeit widerrufen werden. Du kannst das Browserfenster selbstverständlich auch schließen, ohne am Gewinnspiel teilzunehmen.<br><br>
            </p>
        </form>
        <div id="thankyouMessage">
            <h1>Vielen Dank für Deine Teilnahme!</h1>
            <p id="lotteryNumberText" class="lotteryInfo">PLATZHALTER</p>
            <div class="divider" style="width: 400px; margin: 20px auto;"></div>
            <p class="legalNotes">Der Autor des Fragebogens hat keinen Einfluss auf den Ausgang dieser Verlosung. Mehrfachteilnahmen werden zusammengefasst und erhöhen dementsprechend die Chance auf den Gewinn nicht. Nach Abschluss des Gewinnspiels werden alle Email-Adressen gelöscht.<br><br>Bei Fragen zum Gewinnspiel oder den Umgang mit Deinen Daten melde dich bitte hier: pg96ipot@studserv.uni-leipzig.de</p>
        </div>
    </div>

    <script>
        document.getElementById('welcomeMessage').style.display = "block";
        document.getElementById('emailForm').style.display = "block";
        document.getElementById('emailForm').addEventListener('submit', function(e) {
            e.preventDefault();

            var code = generateRandomCode(5);
            var num = generateRandomNum(3);

            document.getElementById('code').value = code;
            document.getElementById('num').value = num;
            
            var lotteryText = `Deine zufällig erstellte Losnummer, mit der Du am Gewinnspiel teilnimmst, lautet <span class="bold">${num}</span>. <br><br> Du gewinnst, wenn deine Nummer mit den ersten drei Ziffern der öffentlich einsehbaren Zusatzlotterie "Spiel 77" vom Samstag den 05. August 2023 übereinstimmen. Sollte es unter allen Teilnehmenden keinen Treffer geben, gewinnt die Losnummer, die numerisch am nächsten dran ist. <br><br> Du brauchst nichts weiter machen. Bei einem Gewinn wirst du automatisch über Deine angegebene Emailadresse kontaktiert. <br><br> Falls Du sichergehen möchtest, dass Deine Losnummer am Gewinnspiel teilnimmt, kannst du die Liste aller teilnehmenden Nummern jederzeit <a href="https://docs.google.com/spreadsheets/d/1YPLtGMUL3oHLXPQlcioxHPCuAajpRm43gNhXo5iPjxc/edit#gid=0">hier</a> einsehen. (Bitte beachte, dass es bis zu 48 Stunden dauern kann, bis deine Nummer in der Liste erscheint). <br><br> Dein einmaliger Teilnahme-Code, mit der du Deine Losnummer in der Liste finden kannst lautet <span class="bold">${code}</span>.`
            
            document.getElementById('lotteryNumberText').innerHTML = lotteryText;

            document.getElementById('welcomeMessage').style.display = "none";
            document.getElementById('emailForm').style.display = "none";
            document.getElementById('thankyouMessage').style.display = "block";
        });

        function generateRandomCode(length) {
            var result = '';
            var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            var charactersLength = characters.length;
            for ( var i = 0; i < length; i++ ) {
                result += characters.charAt(Math.floor(Math.random() * charactersLength));
            }
            return result;
        }

        function generateRandomNum(length) {
            var result = '';
            for (var i = 0; i < length; i++) {
                result += Math.floor(Math.random() * 10);
            }
            return result;
        }
    </script>
</body>
</html>
