<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Willkommen beim Gewinnspiel!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(180deg, #fafafa 0%, #cfcfcf 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
            text-align: center;
        }
        .container {
            max-width: 600px;
            width: 100%;
            padding: 30px;
            background-color: #fafafa;
            border-radius: 10px;
            box-shadow: 0px 0px 20px rgba(0,0,0,0.1);
        }
        #welcomeMessage, #numberForm, #emailForm, #thankyouMessage {
            display: none;
        }
        .legalNotes {
            font-size: 0.7em;
            text-align: justify;
        }
        .lotteryInfo {
            font-size: 0.9em;
            text-align: justify;
        }
        .bold {
            font-size: 1.2em;
        }
        input[type="number"], button[type="submit"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-size: 1em;
        }
        button[type="submit"] {
            background-color: #8fd3f4;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        img {
            width: 300px;
            display: block;
            margin: 0 auto;
        }
        .divider {
            border-top: 1px solid #ccc;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/4e/Universität_Leipzig_logo.svg" alt="Universität Leipzig">
        <div id="welcomeMessage">
            <h1>Willkommen beim Gewinnspiel!</h1>
        </div>
        <form id="numberForm">
            <p>Bitte trage hier eine vierstellige Zahl zwischen 0000 und 9999 ein.</p>
            <input type="number" id="numberInput" required min="0" max="9999" />
            <button type="button" id="numberSubmit">Weiter</button>
        </form>
        <form id="emailForm" action="https://formspree.io/f/mdornqzl" method="POST">
            <input type="hidden" id="code" name="code" />
            <input type="hidden" id="num" name="num" />
            <p id="lotteryText" class="lotteryInfo"></p>
            <input type="email" id="email" name="_replyto" required placeholder="Deine E-Mail Adresse" />
            <button type="submit">Teilnehmen</button>
            <p class="legalNotes">
                Die Teilnahme am Gewinnspiel ist kostenlos, freiwillig, unverbindlich und kann jederzeit widerrufen werden.
            </p>
        </form>
        <div id="thankyouMessage">
            <h1>Vielen Dank für Deine Teilnahme!</h1>
            <p class="lotteryInfo">Deine Teilnahme wurde erfolgreich übermittelt.</p>
        </div>
    </div>
    <script>
        function generateRandomCode(length) {
            var result = '';
            var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            var charactersLength = characters.length;
            for ( var i = 0; i < length; i++ ) {
                result += characters.charAt(Math.floor(Math.random() * charactersLength));
            }
            return result;
        }
        function generateRandomNum(length) {
            var result = '';
            var numbers = '0123456789';
            var numbersLength = numbers.length;
            for ( var i = 0; i < length; i++ ) {
                result += numbers.charAt(Math.floor(Math.random() * numbersLength));
            }
            return result;
        }
        document.getElementById('numberSubmit').addEventListener('click', function(e) {
            e.preventDefault();

            var number = document.getElementById('numberInput').value;
            if (number.length === 4) {
                document.getElementById('welcomeMessage').style.display = "none";
                document.getElementById('numberForm').style.display = "none";
                document.getElementById('emailForm').style.display = "block";
                document.getElementById('lotteryText').innerHTML = `Deine zufällig erstellte Losnummer, mit der Du am Gewinnspiel teilnimmst, lautet <span class="bold">${number}</span>. <br> Dein einmaliger Teilnahme-Code lautet <span class="bold">${generateRandomCode(5)}</span>.<br><br> Du gewinnst, wenn deine Nummer mit den ersten drei Ziffern der öffentlich einsehbaren Zusatzlotterie "Spiel 77" vom Samstag den 05. August 2023 übereinstimmen. Sollte es unter allen Teilnehmenden keinen Treffer geben, gewinnt die Losnummer, die numerisch am nächsten dran ist. <br><br> Du brauchst nichts weiter machen. Bei einem Gewinn wirst du automatisch über Deine angegebene Emailadresse kontaktiert. <br><br> Falls Du sichergehen möchtest, dass Deine Losnummer am Gewinnspiel teilnimmt, kannst du die Liste aller teilnehmenden Nummern jederzeit <a href="https://docs.google.com/spreadsheets/d/1YPLtGMUL3oHLXPQlcioxHPCuAajpRm43gNhXo5iPjxc/edit#gid=0">hier</a> einsehen. (Bitte beachte, dass es bis zu 48 Stunden dauern kann, bis deine Nummer in der Liste erscheint).`;
                document.getElementById('code').value = generateRandomCode(5);
                document.getElementById('num').value = number;
            } else {
                alert('Bitte eine vierstellige Zahl eingeben.');
            }
        });

        // Zeige die Willkommensnachricht und das Formular für die Zahleneingabe, wenn das Dokument geladen ist
        document.addEventListener('DOMContentLoaded', (event) => {
            document.getElementById('welcomeMessage').style.display = "block";
            document.getElementById('numberForm').style.display = "block";
        });
    </script>
</body>
</html>
